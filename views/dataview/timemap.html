{% extends "base.html" %}

{% block bodyclass %}{{ gettext('view') }}{% if embed %} {{ gettext('embed') }}{% endif %}{% endblock %}

{% block extrahead %}
  <!-- Open links in new window/tab by default -->
  <base target="_blank" />
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/vendor/recline/vendor/leaflet/0.4.4/leaflet.ie.css" />
  <![endif]-->
  <link rel="stylesheet" href="/vendor/recline/vendor/leaflet.markercluster/MarkerCluster.css">
  <link rel="stylesheet" href="/vendor/recline/vendor/leaflet.markercluster/MarkerCluster.Default.css">

  <link rel="stylesheet" href="/vendor/leaflet.label/leaflet.label.css" />

  <link rel="stylesheet" href="/vendor/recline/vendor/timeline/css/timeline.css">

  <!-- Recline CSS components -->
  <link rel="stylesheet" href="/vendor/recline/dist/recline.css">
  <!-- /Recline CSS components -->
{% endblock %}

{% block navbar %}
<div class="mini-nav">
  {% include "nav.html" %}
</div>
{% endblock %}

{% block content %}
<div class="data-views">
  <div class="controls">
    <div class="toolbox hideme">
      <form action="" method="GET" class="form-inline">
        <div class="input-append text-query">
          <input type="text" name="q" value="" class="span3" placeholder="{{ gettext('Search data ...') }}" class="search-query" />
          <a class="js-show-toolbox" href="#"><span class="add-on"><i class="icon-search"></i></span></a>
        </div>
      </form>
    </div>
  </div>
  <div class="panes">
    <div class="timeline-pane">
      <div class="timeline"></div>
      &nbsp;
    </div>
    <div class="map-pane">
      <div class="map"></div>
    </div>
  </div>
</div>

<div class="modal hide fade embed-modal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>{{ gettext('Embed Instructions') }}</h3>
  </div>
  <div class="modal-body">
    <p>{{ gettext('Copy and paste the following into your web page') }}</p>
    <textarea style="width: 100%; height: 100px;" ></textarea>
  </div>
</div>
</div>

<div class="loading js-loading"><i class="icon-spinner icon-spin icon-large"></i> {{ gettext('Loading data...') }}</div>
{% endblock %}

{% block extrabody %}
  <script type="text/javascript">
    var VIZDATA = {{vizJSON}};
  </script>
  <!-- 3rd party JS libraries -->
  <script type="text/javascript" src="/vendor/recline/vendor/jquery/1.7.1/jquery.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/underscore/1.4.4/underscore.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/underscore.deferred/0.4.0/underscore.deferred.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/backbone/1.0.0/backbone.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/moment/2.0.0/moment.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/mustache/0.5.0-dev/mustache.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/bootstrap/2.0.2/bootstrap.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/leaflet.markercluster/leaflet.markercluster.js"></script>
  <script type="text/javascript" src="/vendor/recline/vendor/timeline/js/timeline.js"></script>
  <script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>
  <script type="text/javascript" src="/vendor/leaflet.label/leaflet.label.js"></script>

  <script type="text/javascript" src="/vendor/recline/dist/recline.js"></script>
  <script type="text/javascript" src="http://okfnlabs.org/recline.backend.gdocs/backend.gdocs.js"></script>

  <!-- non-library javascript specific to this demo -->
  <script type="text/javascript" src="/js/view.js"></script>
{% endblock %}

